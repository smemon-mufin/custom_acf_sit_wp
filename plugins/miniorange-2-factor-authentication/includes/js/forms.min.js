jQuery("#forms").addClass("mo2f-subtab-active"),jQuery("#mo_2fa_two_fa").addClass("side-nav-active");const activeTab=localStorage.getItem("activeTab")||"mo2f_login_btn";function switchTab(e){localStorage.setItem("activeTab",e);let o=jQuery("#mo2f_login_form_settings"),t=jQuery("#mo2f_registration_form_settings"),s=jQuery("#mo2f_login_btn"),i=jQuery("#mo2f_register_button");"mo2f_login_btn"===e?(o.removeClass("hidden"),t.addClass("hidden"),s.addClass("mo2f-active"),i.removeClass("mo2f-active")):(o.addClass("hidden"),t.removeClass("hidden"),s.removeClass("mo2f-active"),i.addClass("mo2f-active"))}function registerwithminiOrange(){jQuery("#my_account_2fa").click()}function validate_selector(e){let o=!1;return/^#/.test(e)&&(o=!0),/^\./.test(e)&&(o=!0),/^input\[name=/.test(e)&&(o=!0),o}jQuery(document).ready(function(){let e=localStorage.getItem("activeTab")||"mo2f_login_btn";switchTab(e),jQuery("#mo2f_login_btn").click(function(){switchTab("mo2f_login_btn")}),jQuery("#mo2f_register_button").click(function(){switchTab("mo2f_register_button")});let o=forms.formArray,t=jQuery;t("#mo2f_shortcode_form_selector").prop("disabled",!0),t("#mo2f_shortcode_submit_selector").prop("disabled",!0),t("#mo2f_shortcode_email_selector").prop("disabled",!0);let s=!1;is_registered=forms.isRegistered,t("#phoneDiv").css("display","none"),c(),t("#mo2f_method_phone").change(function(){t("#mo2f_method_phone").is(":checked")?t("#phoneDiv").css("display","inherit"):t("#phoneDiv").css("display","none")}),is_registered||(t("#mo2f_use_shortcode_config").prop("checked",!1),t("#mo2f_use_shortcode_config").prop("disabled",!0));var i=localStorage.getItem("activeform");function c(){let e=t("#regFormList").prop("selectedIndex"),s=t("#regFormList option").length-1;e<s?t("#selector_div div").css("display","none"):(t("#mo2f_shortcode_email_selector").prop("disabled",!1),t("#mo2f_shortcode_form_selector").prop("disabled",!1),t("#mo2f_shortcode_phone_selector").prop("disabled",!1),t("#mo2f_shortcode_submit_selector").prop("disabled",!1),t("#selector_div div").css("display","inherit")),t("#mo2f_shortcode_form_selector").val(o[e].formSelector),t("#mo2f_shortcode_submit_selector").val(o[e].submitSelector),t("#mo2f_shortcode_email_selector").val(o[e].emailSelector),null!==o[e].phoneSelector&&(t("#phoneDiv").css("display","block"),t("#mo2f_shortcode_phone_selector").val(o[e].phoneSelector)),0===e&&t("#mo2f_shortcode_phone_selector").val("#wp-register")}function l(){t("#formDiv").css("display","block"),t("#submitDiv").css("display","block"),t("#emailDiv").css("display","block"),t("#mo2f_shortcode_form_selector").val(forms.formSelector),t("#mo2f_shortcode_submit_selector").val(forms.submitSelector),t("#mo2f_shortcode_email_selector").val(forms.emailSelector)}t("#regFormList").val(i),"customform"===i&&l(),t("#regFormList").change(c),t("#regFormList").on("change",function(){var e=t(this).val();localStorage.setItem("activeform",e),"customform"===e?(s=!0,l()):(t("#formDiv").css("display","none"),t("#submitDiv").css("display","none"),t("#emailDiv").css("display","none"))}),t("#mo2f_form_config_save").click(function(){var e="mo2f_enable_custom_login_save_button";if(is_registered=fomrs.isRegistered){let o,i,c,l,r;if(r=t("#mo2f_form_submit_after_validation").is(":checked"),l=t("#mo2f_use_shortcode_config").is(":checked"),o=t("#mo2f_method_phone").is(":checked"),i=t("#mo2f_method_email").is(":checked"),email_selector=t("#mo2f_shortcode_email_selector").val(),phone_selector=t("#mo2f_shortcode_phone_selector").val(),form_selector=t("#mo2f_shortcode_form_selector").val(),submit_selector=t("#mo2f_shortcode_submit_selector").val(),c=!0===i&&!0===o?"both":!1===i&&!0===o?forms.authTypePhone:forms.authTypeEmail,error="",("both"===c||c===forms.authTypeEmail)&&""===email_selector&&(error="Add email selector to use OTP Over Email"),("both"===c||c===forms.authTypePhone)&&""===phone_selector&&(error="Add phone selector to use OTP Over SMS"),validate_selector(email_selector)||(error="NOTE: Please enter valid selectors. Element's ID Selector looks like #element_id and Element's name Selector looks like input[name=element_name]."),""!=error)saveSettingsErrorsMsg(e,error);else{let m={action:"mo2f_login_settings_ajax",option:"mo2f_save_custom_form_settings",mo2f_nonce_save_form_settings:t("#mo2f_nonce_save_form_settings").val(),nonce:forms.nonce,submit_selector:submit_selector,form_selector:form_selector,email_selector:email_selector,phone_selector:phone_selector,authType:c,customForm:s,enableShortcode:l,formSubmit:r};jQuery.post(ajaxurl,m,function(o){"fields_empty"==o.data?saveSettingsErrorsMsg(e,"One or more fields are empty!"):o.success?saveSettingsSuccessMsg(e,"Settings saved successfully!"):saveSettingsErrorsMsg(e,"Error occured while saving the settings.")})}}else error_msg("Please Register/Login with miniOrange")})});